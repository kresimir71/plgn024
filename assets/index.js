(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.element,l=window.wp.apiFetch;var r=e.n(l);const a=()=>({pluginName:"plgn024",domData:plgn024}),o=()=>{const[e,l]=(0,n.useState)(a().domData.savedSettings),[o,u]=(0,n.useState)(!1),[s,m]=(0,n.useState)(null),[c,i]=(0,n.useState)(""),[d,E]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),v=a().pluginName,[p,A]=(0,n.useState)(0),{dataFromGet:S,isPendingFromGet:w,errorFromGet:G}=((e,n)=>{const[l,a]=(0,t.useState)(null),[o,u]=(0,t.useState)(!0),[s,m]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const t=new AbortController;return r()({path:e,method:"GET"}).then((e=>{u(!1),a(e),m(null)}),(e=>{console.log("errorFromGet:",e),u(!1),m("Error during GET request")})).catch((e=>{"AbortError"===e.name?console.log("fetch aborted"):(u(!1),m(e.message))})),()=>t.abort()}),[e,n]),{dataFromGet:l,isPendingFromGet:o,errorFromGet:s}})("/"+v+"/v1/settings",p);return(0,t.createElement)("div",null,(0,t.createElement)("h3",null,"Main Settings"),(0,t.createElement)("form",{onSubmit:t=>{t.preventDefault(),h(""),""==c&&""==d&&(u(!0),m(null),setTimeout((()=>{r()({path:"/"+v+"/v1/settings",method:"POST",data:e}).then((e=>{u(!1),m(null),h("SAVED!"),A(p+1)}),(e=>{u(!1),m("Error while saving settings.")})).catch((e=>{console.error(e),u(!1),m("Error while saving settings.")}))}),2e3))}},(0,t.createElement)("label",null,"Username:"),(0,t.createElement)("input",{type:"text",value:e.username,onChange:e=>function(e){const{value:t}=e.target;l((e=>({...e,username:t}))),h(""),t.match(/^[a-zA-Z][a-zA-Z0-9_]{3,30}[a-zA-Z0-9]$/)?i(""):i("Please enter a valid username, like AAAAA1.")}(e)}),(0,t.createElement)("div",null,c),(0,t.createElement)("hr",null),(0,t.createElement)("label",null,"Token:"),(0,t.createElement)("input",{type:"text",value:e.token,onChange:e=>function(e){const{value:t}=e.target;l((e=>({...e,token:t}))),h(""),t.match(/^[a-zA-Z][a-zA-Z0-9_]{3,30}[a-zA-Z0-9]$/)?E(""):E("Please enter a valid token, like BBBBB2.")}(e)}),(0,t.createElement)("div",null,d),(0,t.createElement)("hr",null),(0,t.createElement)("button",null,o?"SAVING ...":"SAVE"),(0,t.createElement)("div",null,c+" "+d),(0,t.createElement)("div",null,null!=s?s:""),(0,t.createElement)("div",null,g)),(0,t.createElement)("hr",null),(0,t.createElement)("h4",null,"Data from get is unused and redundant. It is here to show how it could also be done."),(0,t.createElement)("div",null,(0,t.createElement)("div",null,"errorFromGet: ",null!=G?G:"NO ERROR"),(0,t.createElement)("div",null,"isPendingFromGet: ",w?"PENDING":"NOT PENDING"),(0,t.createElement)("div",null,"token and username: ",null!=S?S.token+" "+S.username:"NO DATA")))};(0,n.render)((0,t.createElement)((()=>(0,t.createElement)("div",null,(0,t.createElement)("h2",null,"Dashboard"),(0,t.createElement)("hr",null),(0,t.createElement)(o,null))),null),document.getElementById(a().pluginName+"-settings"))})();